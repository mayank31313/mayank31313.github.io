(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{4553:function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-page",{staticClass:"q-mt-md"},[t("q-card-section",{attrs:{align:"right"}},[t("q-btn",{attrs:{color:"primary",to:"editdevice",size:"md",label:"Add Device"}})],1),t("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},on:{hide:e.hideDialog},model:{value:e.addModelDialog,callback:function(i){e.addModelDialog=i},expression:"addModelDialog"}},[t("q-card",{staticStyle:{width:"300px"}},[t("q-card-section",[t("div",{staticClass:"text-h6"},[e._v("Add Device")])]),t("q-card-section",{staticClass:"q-pt-none"},[t("q-input",{attrs:{dense:"",label:"Device Name"},model:{value:e.deviceName,callback:function(i){e.deviceName=i},expression:"deviceName"}})],1),t("q-card-section",{staticClass:"q-pt-none"},[t("q-input",{attrs:{dense:"",disable:e.deviceDisabled,label:"Device Code"},model:{value:e.deviceCode,callback:function(i){e.deviceCode=i},expression:"deviceCode"}})],1),t("q-card-section",{staticClass:"q-pt-none"},[t("q-select",{attrs:{dense:"",options:e.deviceTypes,label:"Device Type"},model:{value:e.deviceType,callback:function(i){e.deviceType=i},expression:"deviceType"}})],1),t("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Add Device"},on:{click:e.addDevice}})],1)],1)],1),t("div",{staticClass:"q-mt-sm"},[t("q-list",e._l(e.devices,(function(i){return t("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i.id,attrs:{clickable:""}},[t("q-item-section",[t("q-icon",{attrs:{name:"fiber_manual_record",color:"green",size:"sm"}})],1),t("q-item-section",[t("q-item-label",{staticClass:"text-h6"},[e._v("\n                      "+e._s(i.deviceName)+"\n                  ")])],1),t("q-item-section",[t("q-btn",{staticClass:"absolute-right q-ma-sm",attrs:{icon:"more_vert",flat:"",color:"primary",size:"sm"}},[t("q-menu",[t("q-list",{staticStyle:{"min-width":"100px"}},[t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.$router.push("editdevice?deviceId="+i.id)}}},[t("q-item-section",[e._v("Edit")])],1),t("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.deleteDevice(i.id)}}},[t("q-item-section",[e._v("Delete")])],1)],1)],1)],1)],1)],1)})),1)],1)],1)},s=[],d=(t("a434"),t("ded3")),c=t.n(d),n=t("2f62"),o={name:"Devices",computed:c()({},Object(n["b"])("global",["getToken"])),watch:{deviceType(e){"BROWSERDEVICE"==e.toUpperCase()?(this.deviceDisabled=!0,this.deviceCode=1e3):this.deviceDisabled=!1}},mounted(){this.token=this.getToken(),this.$axios.get(this.$backendUrl+"/public/api/supported").then((e=>{var i=e.data;for(var t in i)this.deviceTypes.push(i[t].deviceType)})),this.$axios.get(this.$backendUrl+"/auth/device/list",{headers:{Authorization:"Bearer "+this.token}}).then((e=>{console.log(e),this.devices=e.data}))},methods:{hideDialog(){this.deviceType="Select One",this.deviceCode="",this.deviceId="",this.deviceName="",this.editing=!1},editDevice(e){this.deviceName=e.deviceName,this.deviceCode=e.deviceId,this.deviceType=e.deviceType.deviceType,this.deviceId=e.id,this.addModelDialog=!0,this.editing=!0},deleteDevice(e){this.$axios.delete(this.$backendUrl+"/auth/device/?id="+e,{headers:{Authorization:"Bearer "+this.getToken()}}).then((i=>{var t=this.$indexOf(this.devices,e);this.devices.splice(t,1),this.$q.notify({type:"positive",message:"Device Deleted"})})).catch((e=>{this.$q.notify({type:"negative",message:"Something went wrong"})}))},addDevice(){var e={deviceName:this.deviceName,deviceId:parseInt(this.deviceCode),deviceType:{deviceType:this.deviceType},elements:[]};""!=this.deviceId&&this.editing&&(e["id"]=this.deviceId),this.$axios.post(this.$backendUrl+"/auth/device/create",e,{headers:{Authorization:"Bearer "+this.token}}).then((e=>{if(this.editing){var i=this.$indexOf(this.devices,e.data.id);this.devices[i]=e.data}else this.devices.push(e.data)})).catch((e=>{this.$q.notify({type:"negative",message:"Something went wrong"})}))}},data(){return{addModelDialog:!1,deviceCode:"",deviceName:"",deviceType:"Select One",deviceId:"",deviceTypes:[],devices:[],editing:!1,token:"",deviceDisabled:!1}}},l=o,r=t("2877"),v=t("9989"),h=t("a370"),p=t("9c40"),m=t("24e8"),u=t("f09f"),g=t("27f9"),b=t("ddd8"),q=t("4b7e"),y=t("1c1c"),D=t("66e5"),f=t("4074"),k=t("0016"),C=t("0170"),T=t("4e73"),w=t("7f67"),x=t("714f"),I=t("eebe"),N=t.n(I),$=Object(r["a"])(l,a,s,!1,null,null,null);i["default"]=$.exports;N()($,"components",{QPage:v["a"],QCardSection:h["a"],QBtn:p["a"],QDialog:m["a"],QCard:u["a"],QInput:g["a"],QSelect:b["a"],QCardActions:q["a"],QList:y["a"],QItem:D["a"],QItemSection:f["a"],QIcon:k["a"],QItemLabel:C["a"],QMenu:T["a"]}),N()($,"directives",{ClosePopup:w["a"],Ripple:x["a"]})}}]);